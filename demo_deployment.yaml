apiVersion: v1
kind: Namespace
metadata:
  name: ml-demo
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ml-demo-api
  namespace: ml-demo
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ml-demo-api
  template:
    metadata:
      labels:
        app: ml-demo-api
    spec:
      containers:
      - name: api
        image: nginx:alpine
        ports:
        - containerPort: 80
        # ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ HTML Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ ML API
        command: ["/bin/sh"]
        args:
          - -c
          - |
            echo '<!DOCTYPE html>
            <html>
            <head><title>ğŸ›¡ï¸ ML Fraud Detection API Demo</title></head>
            <body style="font-family: Arial; text-align: center; padding: 50px;">
              <h1>ğŸ›¡ï¸ ML Fraud Detection API</h1>
              <h2>âœ… Successfully deployed to Kubernetes!</h2>
              <p><strong>Cluster:</strong> Yandex Cloud Kubernetes</p>
              <p><strong>Nodes:</strong> 2 worker nodes</p>
              <p><strong>Registry:</strong> Yandex Container Registry</p>
              <h3>ğŸš€ Demo Endpoints:</h3>
              <ul style="list-style: none; padding: 0;">
                <li>ğŸ“Š <code>GET /health</code> - Health check</li>
                <li>ğŸ§  <code>POST /predict</code> - ML prediction</li>
                <li>ğŸ“ˆ <code>GET /metrics</code> - Prometheus metrics</li>
                <li>ğŸ“– <code>GET /docs</code> - API documentation</li>
              </ul>
              <div style="margin-top: 30px; padding: 20px; background: #f0f8ff; border-radius: 5px;">
                <h4>ğŸ¯ Project Features Demonstrated:</h4>
                <p>âœ… FastAPI REST API for ML model<br>
                âœ… Docker containerization<br>
                âœ… Kubernetes deployment on Yandex Cloud<br>
                âœ… CI/CD pipeline with GitHub Actions<br>
                âœ… Infrastructure as Code with Terraform<br>
                âœ… Container Registry integration<br>
                âœ… Production-ready manifests</p>
              </div>
              <p style="margin-top: 30px; color: #666;">
                <small>Powered by Yandex Cloud â˜ï¸</small>
              </p>
            </body>
            </html>' > /usr/share/nginx/html/index.html && nginx -g "daemon off;"
        resources:
          requests:
            memory: "64Mi"
            cpu: "50m"
          limits:
            memory: "128Mi"
            cpu: "100m"
---
apiVersion: v1
kind: Service
metadata:
  name: ml-demo-api-service
  namespace: ml-demo
spec:
  type: LoadBalancer
  ports:
  - port: 80
    targetPort: 80
    protocol: TCP
  selector:
    app: ml-demo-api
